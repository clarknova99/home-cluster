---
# yaml-language-server: $schema=https://raw.githubusercontent.com/yannh/kubernetes-json-schema/master/v1.26.1-standalone-strict/configmap-v1.json
apiVersion: v1
kind: ConfigMap
metadata:
  name: homepage-config
  labels:
    app.kubernetes.io/name: homepage
data:
  bookmarks.yaml: |
    ---
  docker.yaml: |
    ---
  kubernetes.yaml: |
    ---
    mode: cluster
  services.yaml: |
    ---
    - Media:
        - Plex:
            icon: plex.png
            href: https://plex.${SECRET_DOMAIN}
            description: Media Player
            widget:
              type: plex
              url: http://192.168.2.200:32400
              key: {{HOMEPAGE_VAR_PLEX_TOKEN}}
        - Sabnzbd:
            icon: sabnzbd.png
            href: https://sabnzbd.${SECRET_DOMAIN}
            description: Downloader
            widget:
              type: sabnzbd
              url: http://sabnzbd.media.svc.cluster.local:8085
              key: {{HOMEPAGE_VAR_SABNZBD_KEY}}
        - Radarr:
            icon: radarr.png
            href: https://radarr.${SECRET_DOMAIN}
            description: Movies Management
            widget:
              type: radarr
              url: http://radarr.media.svc.cluster.local:80
              key: {{HOMEPAGE_VAR_RADARR_KEY}}
        - Sonarr:
            icon: sonarr.png
            href: https://sonarr.${SECRET_DOMAIN}
            description: TV Shows Management
            widget:
              type: sonarr
              url: http://sonarr.media.svc.cluster.local:80
              key: {{HOMEPAGE_VAR_SONARR_KEY}}
        - Bazarr:
            icon: bazarr.png
            href: https://bazarr.${SECRET_DOMAIN}
            description: Subtitles Management
            widget:
              type: bazarr
              url: http://bazarr.media.svc.cluster.local:6767
              key: {{HOMEPAGE_VAR_BAZARR_KEY}}

    - Services:
        - Diskstation:
            icon: synology-dsm.svg
            href: http://192.168.1.2:5000
            description: Synology DSM
            widget:
              type: diskstation
              url: http://192.168.1.2:5000
              username: {{HOMEPAGE_VAR_SYNOLOGY_USERNAME}}
              password: {{HOMEPAGE_VAR_SYNOLOGY_PASSWORD}}
              #volume: volume_N # optional
    - Monitoring:
        - Requests:
            icon: grafana.png
            href: http://192.168.1.2:5000
            description: External HTTP Requests
            widget:
              type: iframe
              name: Requests
              src: http://grafana.monitoring.svc.cluster.local/d-solo/b0c235a4-d758-4aa7-8f09-7137af01edfd/ingress-logs?orgId=1&from=1703442917567&to=1703529317567&panelId=7
              #classes: h-60 sm:h-60 md:h-60 lg:h-60 xl:h-60 2xl:h-72 # optional, use tailwind height classes, see https://tailwindcss.com/docs/height
              #referrerPolicy: same-origin # optional, no default
              #allowPolicy: autoplay; fullscreen; gamepad # optional, no default
              #allowFullscreen: false # optional, default: true
              #loadingStrategy: eager # optional, default: eager
              #allowScrolling: no # optional, default: yes
              #refreshInterval: 2000 # optional, no default

    - Favorites:
        - My GitHub Repo:
            icon: si-github
            href: https://github.com/clarknova99/home-cluster
            description: My Code Repository
        - Grafana Dashboard:
            icon: si-grafana
            href: https://grafana.${SECRET_DOMAIN}
            description: My Cluster Metrics Visualization
        - kubesearch:
            icon: si-kubernetes
            href: https://kubesearch.dev/
            description: Search KAH HelmReleases
        - onedr0p home-ops:
            icon: si-github
            href: https://github.com/onedr0p/home-ops
            description: onedr0p HomeOps Repository
        - bjw-s Chart Values:
            icon: si-github
            href: https://github.com/bjw-s/helm-charts/tree/main/charts/library/common#values
            description: app-template Helm Chart Values

  settings.yaml: |
    ---
    title: My Personal Home Dashboard
    theme: dark
    color: slate
    headerStyle: clean
    target: _blank
    layout:
      Media:
        style: row
        columns: 4
      Network:
        style: row
      Favorites:
        style: row
        columns: 3
    quicklaunch:
      searchDescription: true
      hideInternetSearch: true
      hideVisitURL: true
    providers:
      longhorn:
        url: http://longhorn-frontend.longhorn-system.svc.cluster.local

  widgets.yaml: |
    ---
    - search:
        provider:
          - google
          - duckduckgo
    - openmeteo:
        label: Home
        latitude: {{HOMEPAGE_VAR_HOME_LATITUDE}}
        longitude: {{HOMEPAGE_VAR_HOME_LONGITUDE}}
        units: imperial
        cache: 5
    - kubernetes:
        cluster:
          show: true
          cpu: true
          memory: true
          showLabel: true
          label: home-cluster
        nodes:
          show: false
    - longhorn:
        # Show the expanded view
        expanded: true
        # Shows a node representing the aggregate values
        total: true
        # Shows the node names as labels
        labels: true
